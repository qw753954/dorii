(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ebb2875"],{"603c":function(e,t,c){"use strict";var a=c("7a23");const l={class:"container d-flex flex-column"},o={"aria-label":"breadcrumb",class:"mt-auto"},r={class:"breadcrumb"},s={class:"breadcrumb-item"},n={class:"fs-1 text-white text-spacing-m d-flex align-items-center pb-2"},d={class:"fs-3 ms-2 ms-md-3"};function i(e,t,c,i,b,m){const p=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"banner bg-cover d-flex position-relative",style:Object(a["normalizeStyle"])(`background-image: url(${c.imageUrl})`)},[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("nav",o,[Object(a["createElementVNode"])("ol",r,[Object(a["createElementVNode"])("li",s,[Object(a["createVNode"])(p,{to:"/",class:"link-white d-inline-block"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("首頁")]),_:1})]),Object(a["renderSlot"])(e.$slots,"default")])]),Object(a["createElementVNode"])("h2",n,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(c.title)+" ",1),Object(a["createElementVNode"])("span",d,Object(a["toDisplayString"])(c.engTitle),1)])])],4)}var b={name:"Banner Component",props:{title:String,engTitle:String,imageUrl:String}},m=c("d959"),p=c.n(m);const O=p()(b,[["render",i]]);t["a"]=O},7168:function(e,t,c){"use strict";c.r(t),c.d(t,"$get",(function(){return o})),c.d(t,"$post",(function(){return r})),c.d(t,"$put",(function(){return s})),c.d(t,"$delete",(function(){return n}));var a=c("bc3a"),l=c.n(a);function o(e){return new Promise((t,c)=>{l.a.get(e).then(e=>{t(e)}).catch(e=>{c(e.message)})})}function r(e,t={}){return new Promise((c,a)=>{l.a.post(e,t).then(e=>{c(e)}).catch(e=>{a(e.message)})})}function s(e,t={}){return new Promise((c,a)=>{l.a.put(e,t).then(e=>{c(e)}).catch(e=>{a(e.message)})})}function n(e){return new Promise((t,c)=>{l.a.delete(e).then(e=>{t(e)}).catch(e=>{c(e.message)})})}},e82f:function(e,t,c){"use strict";c.r(t);var a=c("7a23");const l=Object(a["createElementVNode"])("li",{class:"breadcrumb-item active","aria-current":"page"}," 訂單資訊 ",-1),o={class:"checkout bg-light"},r={class:"container py-7 py-md-9"},s={class:"steps list-unstyled d-flex justify-content-between position-relative mx-auto mb-8"},n=Object(a["createElementVNode"])("li",{class:"steps-item success w-33 d-flex flex-column align-items-center py-2 px-4"},[Object(a["createElementVNode"])("p",{class:"small rounded-circle text-center mb-2"},[Object(a["createElementVNode"])("i",{class:"far fa-check"})]),Object(a["createTextVNode"])(" 資料填寫 ")],-1),d={class:"small rounded-circle text-center mb-2"},i={key:0,class:"far fa-check"},b={class:"small rounded-circle text-center mb-2"},m={key:0,class:"far fa-check"},p={class:"row"},O={key:0,class:"col-md-9 col-xl-7 mx-auto"},j={class:"card-body bg-white text-center py-6"},u=Object(a["createElementVNode"])("i",{class:"fad fa-check-circle text-success fa-3x mb-3"},null,-1),N=Object(a["createElementVNode"])("h3",{class:"h3 mb-5"},"付款成功",-1),g=Object(a["createElementVNode"])("h4",{class:"h5"},"感謝您的訂購～",-1),h=Object(a["createElementVNode"])("p",{class:"mb-7"},[Object(a["createTextVNode"])(" 商品預計於五個工作天內寄送（不含週休及國定例假日）"),Object(a["createElementVNode"])("br"),Object(a["createTextVNode"])(" 再請留意簡訊通知及配送人員的電話 ")],-1),E={key:1,class:"col-md-9 col-xl-7 mx-auto"},V=Object(a["createElementVNode"])("div",{class:"card-header"},[Object(a["createElementVNode"])("h2",{class:"h4 text-center py-3 mb-0"},"訂單資訊")],-1),k={class:"card-body bg-white p-5"},y={key:0,class:"h6 alert alert-highlight text-center rounded-4 mb-4"},f=Object(a["createElementVNode"])("i",{class:"display-4 fas fa-badge-check d-block fw-bolder mb-2"},null,-1),w={key:0,class:"h5"},x={key:1,class:"h5"},B={key:2,class:"small"},v={class:"small text-end text-gray"},T={class:"accordion mb-4",id:"accordionExample"},C={class:"accordion-item"},S=Object(a["createElementVNode"])("h2",{class:"accordion-header",id:"headingTwo"},[Object(a["createElementVNode"])("button",{type:"button",class:"accordion-button fw-bold collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo",style:{"font-size":"15px"}}," 訂購商品 ")],-1),D={id:"collapseTwo",class:"accordion-collapse collapse","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample"},$={class:"accordion-body list-unstyled"},P=["src","alt"],F={class:"d-flex flex-column py-1"},I={class:"h6 mb-auto"},L={key:0,class:"d-block small mt-1 mb-0"},_={class:"small text-primary opacity-75"},M={class:"small mb-0"},z={class:"ms-auto align-self-center text-end mb-0"},G={class:"table table-hover"},q=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"訂單編號",-1),Q={class:"user-select-all text-break"},W={class:"d-flex"},J=["value"],H=Object(a["createElementVNode"])("i",{class:"far fa-copy"},null,-1),U=[H],X=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"付款方式",-1),A=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"姓名",-1),K=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"手機",-1),Y=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"E-mail",-1),Z=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"收件地址",-1),R=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold",width:"30%"},"備註",-1),ee=Object(a["createElementVNode"])("td",{scope:"row",class:"fw-bold align-middle"},"訂單金額",-1),te={key:0,type:"button",class:"fs-6 fw-bolder text-highlight d-flex justify-content-between align-items-center w-100 ps-0","data-bs-toggle":"collapse","data-bs-target":"#collapseCoupon","aria-expanded":"false","aria-controls":"collapseExample"},ce=Object(a["createElementVNode"])("i",{class:"far fa-arrow-alt-circle-down link-gray"},null,-1),ae={key:2,class:"collapse",id:"collapseCoupon"},le={class:"collapse small list-unstyled text-highlight d-flex mt-1"},oe={key:0,class:"small me-2"},re=Object(a["createElementVNode"])("i",{class:"fad fa-ticket"},null,-1),se={key:1,class:"small"},ne=Object(a["createElementVNode"])("i",{class:"fad fa-ticket"},null,-1),de=["disabled"],ie=Object(a["createElementVNode"])("i",{class:"fas fa-spinner fa-pulse me-1"},null,-1);function be(e,t,c,H,be,me){const pe=Object(a["resolveComponent"])("CustomLoading"),Oe=Object(a["resolveComponent"])("Banner"),je=Object(a["resolveComponent"])("router-link");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createVNode"])(pe,{active:be.isLoading},null,8,["active"]),Object(a["createVNode"])(Oe,{title:"訂單資訊",engTitle:"Order Info",imageUrl:"https://storage.googleapis.com/vue-course-api.appspot.com/peihan/1628002514350.jpg?GoogleAccessId=firebase-adminsdk-zzty7%40vue-course-api.iam.gserviceaccount.com&Expires=1742169600&Signature=ehSobRbgds04rlX9mTawGk1diYVcyoJIlOliLOBPND%2FTZwWzvBMTebq1S4u6fEWoDu6bzU3F08xGDCs5cM99%2FjdFkHX3oEwBALPn%2B6kQDtBwhEW0ALQTa03DVWa%2BGDTcMTTHY1lOXVEBMJC20ldYITKZ%2B3qgsK48hqHkuM%2BL8CkTUv77TPM6k1C%2B89LOShTxGl3hgvtIddE8HEibxHJiqMX%2BeFgPbesRigISFGyQv5g8KjUBT0JkMgYWVx69rh1n8wQogT0tDqdwQE9M0mifOb5lyCSJzI%2F7s1f%2Fme6u45QHbXS2%2BQ2DB5W9e%2F5DqiSWDmWjANPt45ZwD1DXctKvSQ%3D%3D"},{default:Object(a["withCtx"])(()=>[l]),_:1}),Object(a["createElementVNode"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["createElementVNode"])("ul",s,[n,Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])(["steps-item w-33 d-flex flex-column align-items-center py-2 px-4",{active:!be.isPaid,success:be.isPaid||be.order.is_paid}])},[Object(a["createElementVNode"])("p",d,[be.isPaid||be.order.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",i)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("2")],64))]),Object(a["createTextVNode"])(" 訂單建立 ")],2),Object(a["createElementVNode"])("li",{class:Object(a["normalizeClass"])(["steps-item w-33 d-flex flex-column align-items-center py-2 px-4",{active:be.isPaid,success:be.order.is_paid}])},[Object(a["createElementVNode"])("p",b,[be.order.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("i",m)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])("3")],64))]),Object(a["createTextVNode"])(" 付款完成 ")],2)]),Object(a["createElementVNode"])("div",p,[be.isPaid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",O,[Object(a["createElementVNode"])("div",j,[u,N,g,h,Object(a["createVNode"])(je,{to:"/products",class:"btn btn-outline-primary"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("繼續購物")]),_:1})])])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",E,[V,Object(a["createElementVNode"])("div",k,[be.order.is_paid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("h3",y,[f,be.isPaid?(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",w,"付款完成")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("p",x,"已付款")),be.isPaid?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",B," 於 "+Object(a["toDisplayString"])(new Date(1e3*be.order.paid_date).toLocaleString())+" 完成付款 ",1))])):Object(a["createCommentVNode"])("",!0),Object(a["createElementVNode"])("p",v," 訂單成立時間："+Object(a["toDisplayString"])(new Date(1e3*be.order.create_at).toLocaleString()),1),Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",C,[S,Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("ul",$,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(be.order.products,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:t.id},[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(t.option,c=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{class:"d-flex position-relative mb-3",key:c.spec},[Object(a["createElementVNode"])("img",{src:t.product.image,alt:t.name,class:"flex-shrink-0 product-img img-cover me-3"},null,8,P),Object(a["createElementVNode"])("div",F,[Object(a["createElementVNode"])("h5",I,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(t.product.title)+" ",1),c?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",L,[Object(a["createElementVNode"])("p",_,Object(a["toDisplayString"])(c.spec),1)])):Object(a["createCommentVNode"])("",!0)]),Object(a["createElementVNode"])("p",M," x "+Object(a["toDisplayString"])(c.qty),1),Object(a["createVNode"])(je,{to:"/product/"+t.product_id,class:"stretched-link"},null,8,["to"])]),Object(a["createElementVNode"])("p",z," NT$ "+Object(a["toDisplayString"])(e.$toCurrency(c.qty*t.product.price)),1)]))),128))],64))),128))])])])]),Object(a["createElementVNode"])("table",G,[Object(a["createElementVNode"])("tbody",null,[Object(a["createElementVNode"])("tr",null,[q,Object(a["createElementVNode"])("td",Q,[Object(a["createElementVNode"])("div",W,[Object(a["createElementVNode"])("input",{type:"text",class:"w-100 bg-transparent",value:be.order.id,ref:"idInput",readonly:""},null,8,J),Object(a["createElementVNode"])("button",{class:"link-gray",type:"button",onClick:t[0]||(t[0]=e=>me.copyOrderId(be.order.id))},U)])])]),Object(a["createElementVNode"])("tr",null,[X,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.user.payment_method),1)]),Object(a["createElementVNode"])("tr",null,[A,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.user.name),1)]),Object(a["createElementVNode"])("tr",null,[K,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.user.tel),1)]),Object(a["createElementVNode"])("tr",null,[Y,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.user.email),1)]),Object(a["createElementVNode"])("tr",null,[Z,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.user.address),1)]),Object(a["createElementVNode"])("tr",null,[R,Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(be.order.message),1)]),Object(a["createElementVNode"])("tr",null,[ee,Object(a["createElementVNode"])("td",null,[be.total>=1e3||be.hasCoupon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",te,[Object(a["createTextVNode"])(" NT$ "+Object(a["toDisplayString"])(be.total<1e3?e.$toCurrency(be.total+120):e.$toCurrency(be.total))+" ",1),ce])):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(" NT$ "+Object(a["toDisplayString"])(be.total<1e3?e.$toCurrency(be.total+120):e.$toCurrency(be.total)),1)],64)),be.total>=1e3||be.hasCoupon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",ae,[Object(a["createElementVNode"])("ul",le,[be.total>=1e3?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",oe,[re,Object(a["createTextVNode"])(" 滿額免運 ")])):Object(a["createCommentVNode"])("",!0),be.hasCoupon?(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",se,[ne,Object(a["createTextVNode"])(" "+Object(a["toDisplayString"])(be.couponName),1)])):Object(a["createCommentVNode"])("",!0)])])):Object(a["createCommentVNode"])("",!0)])])])]),be.order.is_paid?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createElementBlock"])("button",{key:1,type:"button",class:"btn btn-primary w-100 py-2 py-sm-3 mt-2 mt-sm-4",disabled:"payING"===be.loadingState||be.isPaid,onClick:t[1]||(t[1]=e=>me.pay(be.order.id))},["payING"===be.loadingState?(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:0},[ie,Object(a["createTextVNode"])(" 付款中 ")],64)):(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],{key:1},[Object(a["createTextVNode"])(" 確認付款 ")],64))],8,de))])]))])])])],64)}var me=c("603c"),pe=c("7168"),Oe={name:"Checkout: Order Info & Payment",data(){return{test:!1,order:{products:[],user:{}},total:0,hasCoupon:!1,couponName:"",isPaid:!1,loadingState:"",isLoading:!1}},components:{Banner:me["a"]},methods:{async getOrder(e){this.isLoading=!0;try{const t="https://vue3-course-api.hexschool.io/api/peihan/order/"+e,c=await Object(pe["$get"])(t),{success:a,order:l,message:o}=c.data;a?(this.order=l,this.total=Math.floor(l.total),void 0!==l.products[Object.keys(l.products)[0]].coupon&&(this.hasCoupon=!0,this.couponName=l.products[Object.keys(l.products)[0]].coupon.title)):this.$swal.fire({icon:"error",title:o}),this.isLoading=!1}catch(t){this.$swal.fire({icon:"error",title:t})}},async pay(e){this.loadingState="payING";try{const t="https://vue3-course-api.hexschool.io/api/peihan/pay/"+e,c=await Object(pe["$post"])(t),{success:a,message:l}=c.data;a?(this.$swal.fire({icon:"success",title:"付款完成囉～"}),this.isPaid=!0):this.$swal.fire({icon:"error",title:l}),this.loadingState=""}catch(t){this.$swal.fire({icon:"error",title:t})}},copyOrderId(e){this.$refs.idInput.select(),document.execCommand("copy"),this.$swal.fire({icon:"success",title:e+"\n已複製到剪貼簿"})}},watch:{"$route.params.id":{async handler(){this.$route.path.includes("/checkout")&&(this.isPaid=!1,await this.getOrder(this.$route.params.id))}}},async created(){await this.getOrder(this.$route.params.id)}},je=c("d959"),ue=c.n(je);const Ne=ue()(Oe,[["render",be]]);t["default"]=Ne}}]);
//# sourceMappingURL=chunk-3ebb2875.bd98c457.js.map