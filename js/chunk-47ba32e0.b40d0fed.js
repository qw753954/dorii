(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47ba32e0"],{1799:function(e,t,a){"use strict";var c=a("7a23");const o={class:"pagination pagination-sm list-unstyled justify-content-center mt-3"},l=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),n=[l],s=["onClick"],i=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),r=[i];function d(e,t,a,l,i,d){return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",o,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!a.pagination.has_pre}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])(t=>e.$emit("emit-page",a.pagination.current_page-1),["prevent"]))},n)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pagination.total_pages,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:a.pagination.current_page===t}]),key:"pagination_"+t},[Object(c["createElementVNode"])("a",{href:"#",class:"page-link",onClick:Object(c["withModifiers"])(a=>e.$emit("emit-page",t),["prevent"])},Object(c["toDisplayString"])(t),9,s)],2))),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!a.pagination.has_next}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])(t=>e.$emit("emit-page",a.pagination.current_page+1),["prevent"]))},r)],2)])}var b={data(){return{}},props:{pagination:Object},emits:{"emit-page":e=>("number"!==typeof e&&console.warn("emit-page 事件的參數型別需為 number"),"number"===typeof e)}},m=a("d959"),p=a.n(m);const u=p()(b,[["render",d]]);t["a"]=u},"61bc":function(e,t,a){"use strict";a.r(t);var c=a("7a23");const o=Object(c["createElementVNode"])("i",{class:"far fa-plus"},null,-1),l=[o],n={class:"row"},s={class:"col-11 mx-auto"},i={class:"d-md-flex justify-content-between align-items-center mb-3 mb-md-4"},r={class:"d-flex align-items-center justify-content-center"},d=Object(c["createElementVNode"])("h2",{class:"fs-4 mb-0 me-md-3"}," 商品管理 ",-1),b={class:"badge bg-gray d-none d-md-inline-block"},m={class:"d-md-none small text-secondary text-center"},p=Object(c["createElementVNode"])("i",{class:"fab fa-pagelines ms-1"},null,-1),u={class:"card shadow rounded-4"},g={class:"card-body"},j={class:"table-responsive"},O={class:"table table-hover align-middle"},h=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",{class:"bg-white sticky-top"},[Object(c["createElementVNode"])("th",{scope:"col",width:"50",class:"d-none d-md-table-cell"},"#"),Object(c["createElementVNode"])("th",{scope:"col",width:"130"},"類別"),Object(c["createElementVNode"])("th",{scope:"col",width:"250"},"商品名稱"),Object(c["createElementVNode"])("th",{scope:"col",width:"120"},"原價"),Object(c["createElementVNode"])("th",{scope:"col",width:"120"},"售價"),Object(c["createElementVNode"])("th",{scope:"col",width:"60",class:"text-center"},"評分"),Object(c["createElementVNode"])("th",{scope:"col",width:"100",class:"text-center"},"是否啟用"),Object(c["createElementVNode"])("th",{scope:"col",width:"100"})])],-1),E={scope:"row",class:"d-none d-md-table-cell"},N={class:"text-center"},f={class:"d-flex justify-content-center switch-container"},V=["id","checked","onUpdate:modelValue","onChange"],y=["for"],k={class:"text-end"},v={class:"btn-group"},w=["onClick"],x=Object(c["createElementVNode"])("i",{class:"fas fa-edit fa-fw"},null,-1),C=[x],B=["onClick"],M=Object(c["createElementVNode"])("i",{class:"fas fa-trash-alt fa-fw"},null,-1),D=[M];function U(e,t,a,o,x,M){const U=Object(c["resolveComponent"])("Loading"),_=Object(c["resolveComponent"])("Pagination"),T=Object(c["resolveComponent"])("ProductModal"),$=Object(c["resolveComponent"])("DelModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(U,{active:x.isLoading,"z-index":1061,loader:"bars"},null,8,["active"]),Object(c["createElementVNode"])("button",{type:"button",class:"add-fixed rounded-circle shadow d-md-none",onClick:t[0]||(t[0]=e=>M.openModal("new"))},l),Object(c["createElementVNode"])("div",n,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",r,[d,Object(c["createElementVNode"])("small",b,"共 "+Object(c["toDisplayString"])(x.totalQty)+" 筆",1)]),Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-secondary text-white d-none d-md-block",onClick:t[1]||(t[1]=e=>M.openModal("new"))}," 新建商品 ")]),Object(c["createElementVNode"])("p",m,[p,Object(c["createTextVNode"])(" 共 "+Object(c["toDisplayString"])(x.totalQty)+" 筆 ",1)]),Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("div",g,[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("table",O,[h,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(x.products,t=>{var a;return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("th",E,Object(c["toDisplayString"])(t.num),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.category),1),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.title),1),Object(c["createElementVNode"])("td",null,"$"+Object(c["toDisplayString"])(e.$toCurrency(t.origin_price)),1),Object(c["createElementVNode"])("td",null,"$"+Object(c["toDisplayString"])(e.$toCurrency(t.price)),1),Object(c["createElementVNode"])("td",N,Object(c["toDisplayString"])(null===(a=t.options)||void 0===a?void 0:a.rate),1),Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",f,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"checkbox",class:"scroll-input",id:t.id,"true-value":1,"false-value":0,checked:t.is_enabled,"onUpdate:modelValue":e=>t.is_enabled=e,onChange:e=>M.updateProduct(!1,t)},null,40,V),[[c["vModelCheckbox"],t.is_enabled]]),Object(c["createElementVNode"])("label",{for:t.id,class:"scroll-label"},null,8,y)])]),Object(c["createElementVNode"])("td",k,[Object(c["createElementVNode"])("div",v,[Object(c["createElementVNode"])("button",{type:"button",class:"operate-btn btn btn-outline-secondary btn-sm",onClick:e=>M.openModal("edit",t)},C,8,w),Object(c["createElementVNode"])("button",{type:"button",class:"operate-btn btn btn-outline-danger btn-sm",onClick:e=>M.openModal("delete",t)},D,8,B)])])])}),128))])])]),x.totalQty&&x.pagination.total_pages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(_,{key:0,pagination:x.pagination,onEmitPage:M.getProducts},null,8,["pagination","onEmitPage"])):Object(c["createCommentVNode"])("",!0)])])])]),Object(c["createVNode"])(T,{ref:"productModal","is-new":x.isNew,"temp-product":x.tempProduct,outerCategory:x.categories,onEmitUpdate:M.updateProduct},null,8,["is-new","temp-product","outerCategory","onEmitUpdate"]),Object(c["createVNode"])($,{ref:"delModal",topic:"product","temp-data":x.tempProduct,onEmitChange:M.triggerLoading,onEmitGet:M.getProducts},null,8,["temp-data","onEmitChange","onEmitGet"])],64)}const _={class:"modal fade",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},T={class:"modal-dialog modal-dialog-scrollable"},$={class:"modal-content"},L={class:"modal-header bg-primary"},I={class:"modal-title text-white",id:"staticBackdropLabel"},P=Object(c["createElementVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),S={class:"modal-body"},A={class:"nav nav-pills bg-light rounded-3 p-2 mb-4",id:"pills-tab",role:"tablist"},F={class:"nav-item me-2",role:"presentation"},z={class:"nav-link active",id:"pills-main-tab","data-bs-toggle":"pill","data-bs-target":"#pills-main",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true",ref:"mainLink"},Q=Object(c["createElementVNode"])("li",{class:"nav-item me-2",role:"presentation"},[Object(c["createElementVNode"])("button",{class:"nav-link",id:"pills-des-tab","data-bs-toggle":"pill","data-bs-target":"#pills-des",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"}," 補充說明 ")],-1),J=Object(c["createElementVNode"])("li",{class:"nav-item",role:"presentation"},[Object(c["createElementVNode"])("button",{class:"nav-link",id:"pills-img-tab","data-bs-toggle":"pill","data-bs-target":"#pills-img",type:"button",role:"tab","aria-controls":"pills-contact","aria-selected":"false"}," 圖片設定 ")],-1),q={class:"tab-content",id:"pills-tabContent"},G={class:"tab-pane fade show active",id:"pills-main",role:"tabpanel","aria-labelledby":"pills-profile-tab",ref:"mainArea"},W={class:"mb-3"},H=Object(c["createElementVNode"])("label",{for:"title",class:"form-label"},[Object(c["createTextVNode"])(" 標題"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),R={class:"row"},K={class:"col-md-6 mb-3"},X={for:"category",class:"form-label"},Y=Object(c["createElementVNode"])("span",{class:"text-danger"},"*",-1),Z={class:"row gx-0 align-items-center"},ee={class:"col pe-2"},te=Object(c["createElementVNode"])("option",{value:"",selected:"",disabled:""},"請選擇類別",-1),ae=["value"],ce={class:"col-auto"},oe=Object(c["createElementVNode"])("i",{class:"fas fa-cog fa-pulse"},null,-1),le=[oe],ne={class:"col pe-2"},se={class:"col-auto d-flex"},ie=Object(c["createElementVNode"])("i",{class:"fas fa-check"},null,-1),re=[ie],de=Object(c["createElementVNode"])("i",{class:"fas fa-times"},null,-1),be=[de],me=Object(c["createElementVNode"])("p",{class:"col-12 small text-danger d-flex align-items-baseline pt-1 mb-0"},[Object(c["createElementVNode"])("i",{class:"fas fa-exclamation-circle d-block me-1"}),Object(c["createTextVNode"])(" 沒使用到的類別，頁面重整後即會自動刪除 ")],-1),pe={class:"col-md-6 mb-3"},ue=Object(c["createElementVNode"])("label",{for:"unit",class:"form-label"},[Object(c["createTextVNode"])(" 單位"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),ge={class:"row"},je={key:0,class:"col mb-3"},Oe=Object(c["createElementVNode"])("p",{class:"mb-2"},[Object(c["createTextVNode"])("可選款式"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),he={class:"d-flex"},Ee={class:"form-check me-3"},Ne=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"clip"},"夾式",-1),fe={class:"form-check me-3"},Ve=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"pin"},"針式",-1),ye={class:"form-check"},ke=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"hook"},"勾式",-1),ve={key:1,class:"col mb-3"},we=Object(c["createElementVNode"])("p",{class:"mb-2"},[Object(c["createTextVNode"])("尺寸"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),xe={class:"d-flex"},Ce={class:"form-check me-3"},Be=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"origine_size"},"原尺寸",-1),Me={class:"form-check me-3"},De=Object(c["createElementVNode"])("label",{class:"form-check-label",for:"modify_size"}," 改尺寸（請備註尺寸） ",-1),Ue={class:"row"},_e={class:"col-md-6 mb-3"},Te=Object(c["createElementVNode"])("label",{for:"origin_price",class:"form-label"},[Object(c["createTextVNode"])(" 原價"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),$e={class:"col-md-6 mb-3"},Le=Object(c["createElementVNode"])("label",{for:"price",class:"form-label"},[Object(c["createTextVNode"])(" 售價"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1),Ie={class:"mb-3"},Pe=Object(c["createElementVNode"])("label",{for:"rate",class:"form-label d-block"},[Object(c["createTextVNode"])(" 評分"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*"),Object(c["createElementVNode"])("span",{class:"text-muted small ps-2"},"( 請拖曳 )")],-1),Se={class:"d-flex align-items-center border rounded-1 p-3"},Ae={class:"h5 font-monospace mb-0 me-2"},Fe={class:"tab-pane fade",id:"pills-des",role:"tabpanel","aria-labelledby":"pills-contact-tab"},ze={class:"mb-3"},Qe=Object(c["createElementVNode"])("label",{for:"description",class:"mb-1"},"商品描述",-1),Je={class:"mb-3"},qe=Object(c["createElementVNode"])("label",{for:"content",class:"mb-1"},"說明內容",-1),Ge={class:"tab-pane fade",id:"pills-img",role:"tabpanel","aria-labelledby":"pills-home-tab"},We={class:"row"},He={class:"col-7"},Re=Object(c["createElementVNode"])("label",{for:"image",class:"form-label mb-2"},"主要圖片",-1),Ke={class:"d-flex justify-content-end align-items-center"},Xe=Object(c["createElementVNode"])("span",{class:"me-2"},"或",-1),Ye={key:0,class:"btn btn-sm btn-secondary d-inline-block"},Ze=Object(c["createElementVNode"])("i",{class:"fas fa-upload"},null,-1),et={key:1,type:"button",class:"btn btn-sm btn-secondary disabled"},tt=Object(c["createElementVNode"])("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),at={class:"col-5"},ct={key:0,class:"img-default bg-light",style:{height:"170px"}},ot=Object(c["createElementVNode"])("i",{class:"fas fa-image"},null,-1),lt=[ot],nt=["src","alt"],st=Object(c["createElementVNode"])("hr",{class:"my-5"},null,-1),it=Object(c["createElementVNode"])("label",{for:"images",class:"form-label"},[Object(c["createTextVNode"])(" 多圖新增"),Object(c["createElementVNode"])("span",{class:"text-muted"},"（最多六張）")],-1),rt={class:"row list-unstyled mb-1"},dt=Object(c["createElementVNode"])("div",{class:"img-default bg-light",style:{height:"100px"}},[Object(c["createElementVNode"])("i",{class:"fas fa-image"})],-1),bt=[dt],mt=["src","alt"],pt={class:"btns align-items-center justify-content-center position-absolute top-0 bottom-0 start-0 end-0"},ut=["onClick"],gt=Object(c["createElementVNode"])("i",{class:"far fa-trash fa-fw"},null,-1),jt=[gt],Ot=["onClick"],ht=Object(c["createElementVNode"])("i",{class:"far fa-pencil-alt fa-fw"},null,-1),Et=[ht],Nt={key:0,class:"row align-items-center"},ft={class:"col"},Vt={class:"col-auto d-flex justify-content-end align-items-center"},yt=Object(c["createElementVNode"])("span",{class:"me-2"},"或",-1),kt={key:0,class:"btn btn-sm btn-secondary d-inline-block"},vt=Object(c["createElementVNode"])("i",{class:"fas fa-upload"},null,-1),wt={key:1,type:"button",class:"btn btn-sm btn-secondary disabled"},xt=Object(c["createElementVNode"])("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1),Ct=Object(c["createElementVNode"])("div",{class:"w-100 mb-3"},null,-1),Bt={class:"modal-footer"},Mt={key:0,class:"form-check me-auto"},Dt=Object(c["createElementVNode"])("label",{for:"is_enabled",class:"form-check-label align-middle"}," 是否啟用 ",-1),Ut=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-gray","data-bs-dismiss":"modal"}," 取消 ",-1);function _t(e,t,a,o,l,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",_,[Object(c["createElementVNode"])("div",T,[Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("h5",I,Object(c["toDisplayString"])(a.isNew?"新增商品":"編輯商品"),1),P]),Object(c["createElementVNode"])("div",S,[Object(c["createElementVNode"])("ul",A,[Object(c["createElementVNode"])("li",F,[Object(c["createElementVNode"])("button",z," 主要資訊 ",512)]),Q,J]),Object(c["createElementVNode"])("div",q,[Object(c["createElementVNode"])("div",G,[Object(c["createElementVNode"])("div",W,[H,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",id:"title",name:"標題",class:"form-control",placeholder:"請輸入名稱","onUpdate:modelValue":t[0]||(t[0]=e=>l.product.title=e)},null,512),[[c["vModelText"],l.product.title,void 0,{trim:!0}]])]),Object(c["createElementVNode"])("div",R,[Object(c["createElementVNode"])("div",K,[Object(c["createElementVNode"])("label",X,[l.isAdding?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])("新增類別")],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createTextVNode"])("類別"),Y],64))]),Object(c["createElementVNode"])("div",Z,[l.isAdding?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createElementVNode"])("div",ne,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control",placeholder:"欲新增的類別名稱","onUpdate:modelValue":t[4]||(t[4]=e=>l.tempCategory=e)},null,512),[[c["vModelText"],l.tempCategory,void 0,{trim:!0}]])]),Object(c["createElementVNode"])("div",se,[Object(c["createElementVNode"])("button",{type:"button",class:"set-category text-secondary",onClick:t[5]||(t[5]=(...e)=>n.addCategory&&n.addCategory(...e))},re),Object(c["createElementVNode"])("button",{type:"button",class:"set-category text-muted",onClick:t[6]||(t[6]=e=>l.isAdding=!1)},be)]),me],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createElementVNode"])("div",ee,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{id:"category",class:"form-select",name:"類別","onUpdate:modelValue":t[1]||(t[1]=e=>l.product.category=e),onChange:t[2]||(t[2]=(...e)=>n.changeCategory&&n.changeCategory(...e))},[te,(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(l.categories,e=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("option",{key:e,value:e},Object(c["toDisplayString"])(e),9,ae))),128))],544),[[c["vModelSelect"],l.product.category]])]),Object(c["createElementVNode"])("div",ce,[Object(c["createElementVNode"])("button",{type:"button",class:"set-category text-secondary",onClick:t[3]||(t[3]=(...e)=>n.setCategory&&n.setCategory(...e))},le)])],64))])]),Object(c["createElementVNode"])("div",pe,[ue,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",id:"unit",placeholder:"請輸入單位",class:"form-control",name:"單位","onUpdate:modelValue":t[7]||(t[7]=e=>l.product.unit=e)},null,512),[[c["vModelText"],l.product.unit]])])]),Object(c["createElementVNode"])("div",ge,["耳環"===l.product.category?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",je,[Oe,Object(c["createElementVNode"])("div",he,[Object(c["createElementVNode"])("div",Ee,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"clip",name:"style",type:"checkbox",value:"夾式","onUpdate:modelValue":t[8]||(t[8]=e=>l.product.options.choose=e)},null,512),[[c["vModelCheckbox"],l.product.options.choose]]),Ne]),Object(c["createElementVNode"])("div",fe,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"pin",name:"style",type:"checkbox",value:"針式","onUpdate:modelValue":t[9]||(t[9]=e=>l.product.options.choose=e)},null,512),[[c["vModelCheckbox"],l.product.options.choose]]),Ve]),Object(c["createElementVNode"])("div",ye,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"hook",name:"style",type:"checkbox",value:"勾式","onUpdate:modelValue":t[10]||(t[10]=e=>l.product.options.choose=e)},null,512),[[c["vModelCheckbox"],l.product.options.choose]]),ke])])])):Object(c["createCommentVNode"])("",!0),"手鍊"===l.product.category||"戒指"===l.product.category?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ve,[we,Object(c["createElementVNode"])("div",xe,[Object(c["createElementVNode"])("div",Ce,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"origine_size",name:"size",type:"checkbox",value:"原尺寸","onUpdate:modelValue":t[11]||(t[11]=e=>l.product.options.choose=e)},null,512),[[c["vModelCheckbox"],l.product.options.choose]]),Be]),Object(c["createElementVNode"])("div",Me,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",id:"modify_size",name:"size",type:"checkbox",value:"改尺寸（請備註尺寸）","onUpdate:modelValue":t[12]||(t[12]=e=>l.product.options.choose=e)},null,512),[[c["vModelCheckbox"],l.product.options.choose]]),De])])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",Ue,[Object(c["createElementVNode"])("div",_e,[Te,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"origin_price",name:"原價",min:"0",placeholder:"請輸入原價","true-value":1,"false-value":0,"onUpdate:modelValue":t[13]||(t[13]=e=>l.product.origin_price=e)},null,512),[[c["vModelText"],l.product.origin_price,void 0,{number:!0}]])]),Object(c["createElementVNode"])("div",$e,[Le,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:"form-control",id:"price",name:"售價",min:"0",placeholder:"請輸入售價","true-value":1,"false-value":0,"onUpdate:modelValue":t[14]||(t[14]=e=>l.product.price=e)},null,512),[[c["vModelText"],l.product.price,void 0,{number:!0}]])])]),Object(c["createElementVNode"])("div",Ie,[Pe,Object(c["createElementVNode"])("div",Se,[Object(c["createElementVNode"])("p",Ae,Object(c["toDisplayString"])(l.product.options.rate),1),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"range",id:"rate",class:"form-range",min:"1",max:"5",step:"1","onUpdate:modelValue":t[15]||(t[15]=e=>l.product.options.rate=e)},null,512),[[c["vModelText"],l.product.options.rate,void 0,{number:!0}]])])])],512),Object(c["createElementVNode"])("div",Fe,[Object(c["createElementVNode"])("div",ze,[Qe,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入商品描述",rows:"4","onUpdate:modelValue":t[16]||(t[16]=e=>l.product.description=e)},null,512),[[c["vModelText"],l.product.description]])]),Object(c["createElementVNode"])("div",Je,[qe,Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容",rows:"4","onUpdate:modelValue":t[17]||(t[17]=e=>l.product.content=e)},null,512),[[c["vModelText"],l.product.content]])])]),Object(c["createElementVNode"])("div",Ge,[Object(c["createElementVNode"])("div",We,[Object(c["createElementVNode"])("div",He,[Re,Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"url",id:"image",class:"form-control mb-3",placeholder:"請輸入圖片網址","onUpdate:modelValue":t[18]||(t[18]=e=>l.product.image=e)},null,512),[[c["vModelText"],l.product.image]]),Object(c["createElementVNode"])("div",Ke,[Xe,l.loadingBtn.mainImgUpload?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",et,[tt,Object(c["createTextVNode"])(" 上傳中 ")])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("label",Ye,[Object(c["createElementVNode"])("input",{type:"file",class:"d-none",ref:"mainFile",onChange:t[19]||(t[19]=e=>n.uploadImg("main"))},null,544),Ze,Object(c["createTextVNode"])(" 本機選取 ")]))])]),Object(c["createElementVNode"])("div",at,[l.product.image?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:1,src:l.product.image,class:"img-fluid rounded-3",alt:l.product.title+"_主圖"},null,8,nt)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",ct,lt))])]),st,it,Object(c["createElementVNode"])("ul",rt,[0===l.product.imagesUrl.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(3,e=>Object(c["createElementVNode"])("li",{class:"col-4 mb-2",key:"images_"+e},bt)),64)):(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],{key:1},Object(c["renderList"])(l.product.imagesUrl,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:"col-4 pb-2",key:e.id},[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["img-state position-relative",{active:l.isEditing==="images_"+t}])},[Object(c["createElementVNode"])("img",{src:e,class:"rounded-3 img-fluid img-cover w-100",style:{height:"100px"},alt:`${l.product.title}_${t}`},null,8,mt),Object(c["createElementVNode"])("div",pt,[Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark py-1 px-2 me-2",onClick:e=>l.product.imagesUrl.splice(t,1)},jt,8,ut),Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["btn btn-outline-light py-1 px-2",{active:l.isEditing==="images_"+t}]),onClick:a=>n.editImage(e,t)},Et,10,Ot)])],2)]))),128))]),l.isEditing||6!==l.product.imagesUrl.length?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Nt,[Object(c["createElementVNode"])("div",ft,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"url",id:"images",class:"form-control",placeholder:"請輸入圖片網址","onUpdate:modelValue":t[20]||(t[20]=e=>l.tempImgUrl=e)},null,512),[[c["vModelText"],l.tempImgUrl]])]),Object(c["createElementVNode"])("div",Vt,[yt,l.loadingBtn.subImgUpload?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",wt,[xt,Object(c["createTextVNode"])(" 上傳中 ")])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("label",kt,[Object(c["createElementVNode"])("input",{type:"file",class:"d-none",ref:"subsFile",onChange:t[21]||(t[21]=e=>n.uploadImg("subs"))},null,544),vt,Object(c["createTextVNode"])(" 本機選取 ")]))]),Ct,l.isEditing?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:0,type:"button",class:"col-5 mx-auto btn btn-outline-danger",onClick:t[22]||(t[22]=(...e)=>n.updateImage&&n.updateImage(...e))}," 確定更新 ")):(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:1,type:"button",class:"col-5 mx-auto btn btn-outline-danger",onClick:t[23]||(t[23]=(...e)=>n.addImages&&n.addImages(...e))}," 確定新增 "))])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createElementVNode"])("div",Bt,[a.isNew?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",Mt,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{class:"form-check-input",type:"checkbox",id:"is_enabled","true-value":1,"false-value":0,"onUpdate:modelValue":t[24]||(t[24]=e=>l.product.is_enabled=e)},null,512),[[c["vModelCheckbox"],l.product.is_enabled]]),Dt])):Object(c["createCommentVNode"])("",!0),Ut,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-primary",onClick:t[25]||(t[25]=(...e)=>n.submitData&&n.submitData(...e))}," 確認 ")])])])],512)}a("14d9");var Tt=a("b1fc"),$t=a.n(Tt),Lt=a("519a"),It=a("7168"),Pt={data(){return{modal:"",tab:"",product:{imagesUrl:[],options:{}},tempImgUrl:"",nowEditImg:0,categories:"",tempCategory:"",isAdding:!1,isEditing:!1,loadingBtn:{mainImgUpload:"",subImgUpload:""}}},mixins:[Lt["a"]],props:{isNew:Boolean,tempProduct:Object,outerCategory:Object},emits:{"emit-update":(e,t)=>("boolean"!==typeof e?console.warn("emit-update 事件的第一個參數型別需為 boolean"):"object"!==typeof t&&console.warn("emit-update 事件的第二個參數型別需為 object"),"boolean"!==typeof e&&"object"!==t)},methods:{velidateField(){this.isDisabled=!1},openModal(){this.modal.show(),this.tab.show(),this.isAdding=!1},setCategory(){this.tempCategory="",this.isAdding=!0},addCategory(){if(!this.tempCategory){const e={success:!1,message:"類別名稱不可為空"};return void this.$httpMsgState(e,"新增類別")}this.categories.push(this.tempCategory);const e={success:!0};this.$httpMsgState(e,"新增類別"),this.tempCategory="",this.isAdding=!1},changeCategory(){"項鍊"===this.product.category?delete this.product.options.choose:this.product.options.choose=[]},addImages(){if(this.tempImgUrl)this.product.imagesUrl.push(this.tempImgUrl),this.tempImgUrl="";else{const e={success:!1,message:"圖片網址不可為空"};this.$httpMsgState(e,"上傳")}},async uploadImg(e){try{const t=new FormData;t.append("file-to-upload",this.$refs["main"===e?"mainFile":"subsFile"].files[0]),this.loadingBtn.mainImgUpload=e;const a="https://vue3-course-api.hexschool.io/api/peihan/admin/upload",c=await Object(It["$post"])(a),{success:o,imageUrl:l}=c.data;o&&("main"===e?this.product.image=l:this.tempImgUrl=l),this.$httpMsgState(c.data,"上傳圖片")}catch(t){this.$swal.fire({icon:"error",title:t})}this.loadingBtn={}},editImage(e,t){this.isEditing="images_"+t,this.nowEditImg=t,this.tempImgUrl=e},updateImage(){this.product.imagesUrl[this.nowEditImg]=this.tempImgUrl,this.tempImgUrl="",this.isEditing=!1},submitData(){if(!this.product.title||!this.product.unit||!this.product.category||""===this.product.price||""===this.product.origin_price||"戒指"===this.product.category&&!this.product.options.choose.length||"手鍊"===this.product.category&&!this.product.options.choose.length||"耳環"===this.product.category&&!this.product.options.choose.length){const e={success:!1,message:"主要資訊的欄位都要填寫"};return this.$httpMsgState(e,this.isNew?"新增":"更新"),void this.tab.show()}if(this.product.price<0||this.product.origin_price<0){const e={success:!1,message:"價格不能低於 0"};this.$httpMsgState(e,this.isNew?"新增":"更新")}else this.$emit("emit-update",this.isNew,this.product)}},watch:{tempProduct(){this.product={...this.tempProduct},this.product.imagesUrl||(this.product.imagesUrl=[]),this.tempImgUrl="",this.isEditing=!1},outerCategory(){this.categories=this.outerCategory}},mounted(){this.tab=new $t.a(this.$refs.mainLink)}},St=a("d959"),At=a.n(St);const Ft=At()(Pt,[["render",_t]]);var zt=Ft,Qt=a("ebbb"),Jt=a("1799"),qt={name:"Products Management",inheritAttrs:!1,data(){return{products:[],pagination:{},currentPage:1,categories:[],tempProduct:{category:"",imagesUrl:[],options:{rate:0}},totalQty:0,isNew:!0,isLoading:!1}},components:{ProductModal:zt,DelModal:Qt["a"],Pagination:Jt["a"]},methods:{async getProducts(e=1){this.isLoading=!0;try{const t="https://vue3-course-api.hexschool.io/api/peihan/admin/products?page="+e,a=await It["$get"](t),{success:c,products:o,pagination:l}=a.data;c&&(this.products=o,this.pagination=l,this.currentPage=l.current_page,this.triggerLoading(!1),await this.getProductsAll())}catch(t){this.$swal.fire({icon:"error",title:t})}},async getProductsAll(){try{const e="https://vue3-course-api.hexschool.io/api/peihan/admin/products/all",t=await It["$get"](e),{products:a,success:c}=t.data;if(!c)return;this.totalQty=Object.keys(a).length,this.getCategory(a)}catch(e){this.$swal.fire({icon:"error",title:e})}},getCategory(e){const t=Object.values(e).map(e=>e.category);this.categories=t.filter((e,t,a)=>a.indexOf(e)===t)},async updateProduct(e,t){this.triggerLoading(!0);try{const a="https://vue3-course-api.hexschool.io/api/peihan/admin/product"+(e?"":"/"+t.id),c=e?"$post":"$put",o=await It[c](a,{data:t}),{success:l}=o.data;l?(this.$refs.productModal.hideModal(),this.getProducts(this.currentPage)):this.triggerLoading(!1),this.$httpMsgState(o.data,e?"新增":"更新")}catch(a){this.$swal.fire({icon:"error",title:a})}},openModal(e,t){switch(e){case"new":this.isNew=!0,this.tempProduct={category:"",imagesUrl:[],options:{rate:5,choose:[],show:[]}},this.$refs.productModal.openModal();break;case"edit":this.isNew=!1,this.tempProduct=JSON.parse(JSON.stringify(t)),this.$refs.productModal.openModal();break;case"delete":this.tempProduct={...t},this.$refs.delModal.openModal();break;default:break}},triggerLoading(e){this.isLoading=e}},created(){this.getProducts()}};const Gt=At()(qt,[["render",U]]);t["default"]=Gt},b1fc:function(e,t,a){
/*!
  * Bootstrap tab.js v5.0.2 (https://getbootstrap.com/)
  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
(function(t,c){e.exports=c(a("848f"),a("6a95"),a("302d"))})(0,(function(e,t,a){"use strict";function c(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var o=c(e),l=c(t),n=c(a);const s=e=>{let t=e.getAttribute("data-bs-target");if(!t||"#"===t){let a=e.getAttribute("href");if(!a||!a.includes("#")&&!a.startsWith("."))return null;a.includes("#")&&!a.startsWith("#")&&(a="#"+a.split("#")[1]),t=a&&"#"!==a?a.trim():null}return t},i=e=>{const t=s(e);return t?document.querySelector(t):null},r=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||("undefined"!==typeof e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),d=e=>e.offsetHeight,b=()=>{const{jQuery:e}=window;return e&&!document.body.hasAttribute("data-bs-no-jquery")?e:null},m=[],p=e=>{"loading"===document.readyState?(m.length||document.addEventListener("DOMContentLoaded",()=>{m.forEach(e=>e())}),m.push(e)):e()},u=e=>{p(()=>{const t=b();if(t){const a=e.NAME,c=t.fn[a];t.fn[a]=e.jQueryInterface,t.fn[a].Constructor=e,t.fn[a].noConflict=()=>(t.fn[a]=c,e.jQueryInterface)}})},g="tab",j="bs.tab",O="."+j,h=".data-api",E="hide"+O,N="hidden"+O,f="show"+O,V="shown"+O,y=`click${O}${h}`,k="dropdown-menu",v="active",w="fade",x="show",C=".dropdown",B=".nav, .list-group",M=".active",D=":scope > li > .active",U='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',_=".dropdown-toggle",T=":scope > .dropdown-menu .active";class $ extends n["default"]{static get NAME(){return g}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(v))return;let e;const t=i(this._element),a=this._element.closest(B);if(a){const t="UL"===a.nodeName||"OL"===a.nodeName?D:M;e=o["default"].find(t,a),e=e[e.length-1]}const c=e?l["default"].trigger(e,E,{relatedTarget:this._element}):null,n=l["default"].trigger(this._element,f,{relatedTarget:e});if(n.defaultPrevented||null!==c&&c.defaultPrevented)return;this._activate(this._element,a);const s=()=>{l["default"].trigger(e,N,{relatedTarget:this._element}),l["default"].trigger(this._element,V,{relatedTarget:e})};t?this._activate(t,t.parentNode,s):s()}_activate(e,t,a){const c=!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?o["default"].children(t,M):o["default"].find(D,t),l=c[0],n=a&&l&&l.classList.contains(w),s=()=>this._transitionComplete(e,l,a);l&&n?(l.classList.remove(x),this._queueCallback(s,e,!0)):s()}_transitionComplete(e,t,a){if(t){t.classList.remove(v);const e=o["default"].findOne(T,t.parentNode);e&&e.classList.remove(v),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(v),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),d(e),e.classList.contains(w)&&e.classList.add(x);let c=e.parentNode;if(c&&"LI"===c.nodeName&&(c=c.parentNode),c&&c.classList.contains(k)){const t=e.closest(C);t&&o["default"].find(_,t).forEach(e=>e.classList.add(v)),e.setAttribute("aria-expanded",!0)}a&&a()}static jQueryInterface(e){return this.each((function(){const t=$.getOrCreateInstance(this);if("string"===typeof e){if("undefined"===typeof t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}return l["default"].on(document,y,U,(function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),r(this))return;const t=$.getOrCreateInstance(this);t.show()})),u($),$}))},ebbb:function(e,t,a){"use strict";var c=a("7a23");const o={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},l={class:"modal-dialog modal-dialog-centered"},n={class:"modal-content"},s=Object(c["createElementVNode"])("div",{class:"modal-header bg-danger"},[Object(c["createElementVNode"])("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 刪除 "),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i={class:"modal-body"},r={class:"fw-bold text-danger"},d=Object(c["createElementVNode"])("span",{class:"fw-bold text-danger"},"所有訂單",-1),b={class:"fw-bold text-danger"},m={class:"fw-bold text-danger"},p={class:"fw-bold text-danger"},u={class:"modal-footer"},g=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-gray btn-sm","data-bs-dismiss":"modal"}," 關閉 ",-1);function j(e,t,a,j,O,h){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",o,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",n,[s,Object(c["createElementVNode"])("div",i,[Object(c["createTextVNode"])(" 確定要刪除 "),"product"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createElementVNode"])("span",r,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 商品嗎？ ")],64)):a.isAll?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[d,Object(c["createTextVNode"])(" ？ ")],64)):"order"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:2},[Object(c["createElementVNode"])("span",b,"編號 "+Object(c["toDisplayString"])(a.tempData.id),1),Object(c["createTextVNode"])(" 訂單？ ")],64)):"article"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:3},[Object(c["createElementVNode"])("span",m,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 文章嗎？ ")],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:4},[Object(c["createElementVNode"])("span",p,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 優惠券嗎？ ")],64)),Object(c["createTextVNode"])(" 刪除後無法恢復！ ")]),Object(c["createElementVNode"])("div",u,[g,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=(...e)=>h.delData&&h.delData(...e))}," 確定 ")])])])],512)}var O=a("519a"),h=a("7168"),E={data(){return{modal:null}},mixins:[O["a"]],props:{tempData:Object,topic:String,isAll:Boolean},emits:{"emit-change":e=>("boolean"!==typeof e&&console.warn("emit-change 事件的參數型別需為 boolean"),"boolean"!==typeof e),"emit-get":()=>!0},methods:{async delData(){this.$emit("emit-change",!0),this.hideModal();try{const e="https://vue3-course-api.hexschool.io/api/peihan/admin/"+(this.isAll?"orders/all":`${this.topic}/${this.tempData.id}`),t=await Object(h["$delete"])(e),{success:a}=t.data;a&&this.$emit("emit-get"),this.$httpMsgState(t.data,"刪除")}catch(e){this.$swal.fire({icon:"error",title:e})}}}},N=a("d959"),f=a.n(N);const V=f()(E,[["render",j]]);t["a"]=V}}]);
//# sourceMappingURL=chunk-47ba32e0.b40d0fed.js.map