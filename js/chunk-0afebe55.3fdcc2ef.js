(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0afebe55"],{1799:function(e,t,a){"use strict";var c=a("7a23");const l={class:"pagination pagination-sm list-unstyled justify-content-center mt-3"},o=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"«",-1),n=[o],r=["onClick"],d=Object(c["createElementVNode"])("span",{"aria-hidden":"true"},"»",-1),i=[d];function s(e,t,a,o,d,s){return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",l,[Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!a.pagination.has_pre}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=Object(c["withModifiers"])(t=>e.$emit("emit-page",a.pagination.current_page-1),["prevent"]))},n)],2),(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pagination.total_pages,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("li",{class:Object(c["normalizeClass"])(["page-item",{active:a.pagination.current_page===t}]),key:"pagination_"+t},[Object(c["createElementVNode"])("a",{href:"#",class:"page-link",onClick:Object(c["withModifiers"])(a=>e.$emit("emit-page",t),["prevent"])},Object(c["toDisplayString"])(t),9,r)],2))),128)),Object(c["createElementVNode"])("li",{class:Object(c["normalizeClass"])(["page-item",{disabled:!a.pagination.has_next}])},[Object(c["createElementVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=Object(c["withModifiers"])(t=>e.$emit("emit-page",a.pagination.current_page+1),["prevent"]))},i)],2)])}var b={data(){return{}},props:{pagination:Object},emits:{"emit-page":e=>("number"!==typeof e&&console.warn("emit-page 事件的參數型別需為 number"),"number"===typeof e)}},m=a("d959"),p=a.n(m);const O=p()(b,[["render",s]]);t["a"]=O},ebbb:function(e,t,a){"use strict";var c=a("7a23");const l={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},o={class:"modal-dialog modal-dialog-centered"},n={class:"modal-content"},r=Object(c["createElementVNode"])("div",{class:"modal-header bg-danger"},[Object(c["createElementVNode"])("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 刪除 "),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),d={class:"modal-body"},i={class:"fw-bold text-danger"},s=Object(c["createElementVNode"])("span",{class:"fw-bold text-danger"},"所有訂單",-1),b={class:"fw-bold text-danger"},m={class:"fw-bold text-danger"},p={class:"fw-bold text-danger"},O={class:"modal-footer"},j=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-gray btn-sm","data-bs-dismiss":"modal"}," 關閉 ",-1);function u(e,t,a,u,E,g){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",l,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",n,[r,Object(c["createElementVNode"])("div",d,[Object(c["createTextVNode"])(" 確定要刪除 "),"product"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createElementVNode"])("span",i,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 商品嗎？ ")],64)):a.isAll?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[s,Object(c["createTextVNode"])(" ？ ")],64)):"order"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:2},[Object(c["createElementVNode"])("span",b,"編號 "+Object(c["toDisplayString"])(a.tempData.id),1),Object(c["createTextVNode"])(" 訂單？ ")],64)):"article"===a.topic?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:3},[Object(c["createElementVNode"])("span",m,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 文章嗎？ ")],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:4},[Object(c["createElementVNode"])("span",p,Object(c["toDisplayString"])(a.tempData.title),1),Object(c["createTextVNode"])(" 優惠券嗎？ ")],64)),Object(c["createTextVNode"])(" 刪除後無法恢復！ ")]),Object(c["createElementVNode"])("div",O,[j,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-danger btn-sm",onClick:t[0]||(t[0]=(...e)=>g.delData&&g.delData(...e))}," 確定 ")])])])],512)}var E=a("519a"),g=a("7168"),V={data(){return{modal:null}},mixins:[E["a"]],props:{tempData:Object,topic:String,isAll:Boolean},emits:{"emit-change":e=>("boolean"!==typeof e&&console.warn("emit-change 事件的參數型別需為 boolean"),"boolean"!==typeof e),"emit-get":()=>!0},methods:{async delData(){this.$emit("emit-change",!0),this.hideModal();try{const e="https://vue3-course-api.hexschool.io/api/peihan/admin/"+(this.isAll?"orders/all":`${this.topic}/${this.tempData.id}`),t=await Object(g["$delete"])(e),{success:a}=t.data;a&&this.$emit("emit-get"),this.$httpMsgState(t.data,"刪除")}catch(e){this.$swal.fire({icon:"error",title:e})}}}},N=a("d959"),h=a.n(N);const y=h()(V,[["render",u]]);t["a"]=y},efd9:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const l={class:"row"},o={class:"col-md-11 mx-auto"},n={class:"d-flex justify-content-between align-items-center mb-4"},r=Object(c["createElementVNode"])("h2",{class:"fs-4 mb-0"},"訂單管理",-1),d=["disabled"],i={class:"card rounded-4 shadow"},s={class:"card-body"},b={class:"table-responsive"},m={class:"table table-borderless"},p=Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",{class:"bg-white sticky-top"},[Object(c["createElementVNode"])("th",{width:"250"},"購買商品"),Object(c["createElementVNode"])("th",{width:"120"},"應付金額"),Object(c["createElementVNode"])("th",{width:"120"},"付款方式"),Object(c["createElementVNode"])("th",{width:"120"},"狀態"),Object(c["createElementVNode"])("th",{width:"150"})])],-1),O={class:"pt-5",colspan:"5"},j={class:"d-flex justify-content-between bg-light rounded-2 border p-2"},u={class:"mb-0"},E=Object(c["createElementVNode"])("i",{class:"fas fa-user-circle"},null,-1),g={class:"ps-3"},V={class:"text-primary"},N={key:0},h={key:1},y={key:2,class:"text-secondary"},f=Object(c["createElementVNode"])("i",{class:"fas fa-check-circle"},null,-1),k={key:3,class:"text-muted"},x=Object(c["createElementVNode"])("i",{class:"fas fa-times-circle"},null,-1),v={class:"text-end pe-3"},w={class:"btn-group"},B=["onClick"],C=Object(c["createElementVNode"])("i",{class:"fas fa-eye fa-fw"},null,-1),D=[C],M=["onClick"],I=Object(c["createElementVNode"])("i",{class:"fas fa-trash-alt fa-fw"},null,-1),$=[I];function S(e,t,a,C,I,S){const T=Object(c["resolveComponent"])("Loading"),_=Object(c["resolveComponent"])("router-link"),L=Object(c["resolveComponent"])("Pagination"),F=Object(c["resolveComponent"])("OrderModal"),z=Object(c["resolveComponent"])("DelModal");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(T,{active:I.isLoading,"z-index":1061,loader:"bars"},null,8,["active"]),Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",n,[r,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-gray",disabled:0===I.orders.length,onClick:t[0]||(t[0]=e=>S.openModal("delete",I.orders,!0))}," 刪除所有訂單 ",8,d)]),Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",b,[Object(c["createElementVNode"])("table",m,[p,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(I.orders,t=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:t.id},[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",O,[Object(c["createElementVNode"])("div",j,[Object(c["createElementVNode"])("p",u,[E,Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.user.name),1)]),Object(c["createVNode"])(_,{to:"/checkout/"+t.id,class:"text-body"},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("small",null,[Object(c["createTextVNode"])("訂單編號 "),Object(c["createElementVNode"])("span",null,Object(c["toDisplayString"])(t.id),1)])]),_:2},1032,["to"])])])]),Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("td",g,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.products,(e,t)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("p",{class:"d-flex justify-content-between mb-2 pe-4",key:t},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.product.title)+" ",1),Object(c["createElementVNode"])("span",V,"x"+Object(c["toDisplayString"])(e.qty),1)]))),128))]),t.total>1e3?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",N," $"+Object(c["toDisplayString"])(e.$toCurrency(Math.floor(t.total))),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",h," $"+Object(c["toDisplayString"])(e.$toCurrency(Math.floor(t.total+120))),1)),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(t.user.payment_method),1),t.is_paid?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",y,[f,Object(c["createTextVNode"])(" 已付款 ")])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",k,[x,Object(c["createTextVNode"])(" 未付款 ")])),Object(c["createElementVNode"])("td",v,[Object(c["createElementVNode"])("div",w,[Object(c["createElementVNode"])("button",{type:"button",class:"operate-btn btn btn-outline-secondary btn-sm",onClick:e=>S.openModal("detail",t)},D,8,B),Object(c["createElementVNode"])("button",{type:"button",class:"operate-btn btn btn-outline-danger btn-sm",onClick:e=>S.openModal("delete",t,!1)},$,8,M)])])])],64))),128))])])]),I.pagination.total_pages>1?(Object(c["openBlock"])(),Object(c["createBlock"])(L,{key:0,pagination:I.pagination,onEmitPage:S.getOrders},null,8,["pagination","onEmitPage"])):Object(c["createCommentVNode"])("",!0)])])])]),Object(c["createVNode"])(F,{ref:"orderModal","temp-order":I.tempOrder,onEmitChange:S.triggerLoading,onEmitGet:S.getOrders},null,8,["temp-order","onEmitChange","onEmitGet"]),Object(c["createVNode"])(z,{ref:"delModal",topic:"order","is-all":I.isAll,"temp-data":I.tempOrder,onEmitChange:S.triggerLoading,onEmitGet:S.getOrders},null,8,["is-all","temp-data","onEmitChange","onEmitGet"])],64)}const T={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},_={class:"modal-dialog modal-dialog-scrollable modal-lg"},L={class:"modal-content"},F=Object(c["createElementVNode"])("div",{class:"modal-header bg-primary"},[Object(c["createElementVNode"])("h5",{class:"modal-title text-white",id:"exampleModalLabel"}," 訂單明細 "),Object(c["createElementVNode"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),z={class:"modal-body"},A={class:"accordion mb-5",id:"accordionFlushExample"},U={class:"accordion-item"},P=Object(c["createElementVNode"])("h2",{class:"accordion-header",id:"flush-headingOne"},[Object(c["createElementVNode"])("button",{type:"button",class:"accordion-button fw-bold collapsed","data-bs-toggle":"collapse","data-bs-target":"#flush-collapseOne","aria-expanded":"false","aria-controls":"flush-collapseOne"},[Object(c["createElementVNode"])("i",{class:"fas fa-align-left pe-3"}),Object(c["createTextVNode"])(" 選購商品 ")])],-1),q={id:"flush-collapseOne",class:"accordion-collapse collapse","aria-labelledby":"flush-headingOne","data-bs-parent":"#accordionFlushExample"},G={class:"accordion-body"},J={class:"d-flex justify-content-end mb-2"},H=Object(c["createElementVNode"])("i",{class:"fas fa-edit me-1"},null,-1),K={class:"table align-middle"},Q=Object(c["createElementVNode"])("td",{style:{width:"20px"}},"◾",-1),R={key:0,class:"small badge bg-secondary ms-1"},W={style:{width:"120px"},class:"text-end"},X={style:{width:"120px"},class:"text-end"},Y={class:"d-flex align-items-center"},Z=["readonly","onUpdate:modelValue","onChange"],ee={class:"row gx-0 justify-content-between"},te={class:"col-lg-5 mb-3 mb-lg-0"},ae={class:"fs-6 text-center rounded-pill bg-light py-2 px-3 mb-3"},ce=Object(c["createElementVNode"])("i",{class:"fas fa-edit"},null,-1),le=[ce],oe={class:"table align-middle"},ne=Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("label",{for:"name"},"姓名")],-1),re={width:"70%"},de=["readonly"],ie=Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("label",{for:"email"},"E-mail")],-1),se={width:"70%"},be=["readonly"],me=Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("label",{for:"email"},"手機")],-1),pe={width:"70%"},Oe=["readonly"],je=Object(c["createElementVNode"])("th",null,[Object(c["createElementVNode"])("label",{for:"address"},"地址")],-1),ue={width:"70%"},Ee=["readonly"],ge=Object(c["createElementVNode"])("th",{class:"border-bottom-0 py-3"},"備註",-1),Ve={width:"70%",class:"border-bottom-0 py-3"},Ne={class:"col-lg-6"},he={class:"fs-6 text-center rounded-pill bg-light py-2 px-3 mb-3"},ye=Object(c["createElementVNode"])("i",{class:"fas fa-edit"},null,-1),fe=[ye],ke={class:"table align-middle"},xe=Object(c["createElementVNode"])("th",null,"訂單編號",-1),ve={width:"70%"},we={class:"d-block user-select-all py-1"},Be=Object(c["createElementVNode"])("th",null,"下單日期",-1),Ce={width:"70%"},De={class:"d-block py-1"},Me=Object(c["createElementVNode"])("th",null,"付款時間",-1),Ie={width:"70%"},$e={class:"d-block py-1"},Se=Object(c["createElementVNode"])("th",null,"付款方式",-1),Te={width:"70%"},_e=["disabled"],Le=Object(c["createElementVNode"])("option",{value:"信用卡"},"信用卡",-1),Fe=Object(c["createElementVNode"])("option",{value:"ATM 轉帳"},"ATM 轉帳",-1),ze=Object(c["createElementVNode"])("option",{value:"Apple pay"},"Apple pay",-1),Ae=[Le,Fe,ze],Ue=Object(c["createElementVNode"])("th",null,"付款狀態",-1),Pe=Object(c["createElementVNode"])("th",{class:"border-bottom-0"},"總金額",-1),qe={key:0,class:"border-bottom-0"},Ge={key:0,class:"d-block py-1"},Je={key:1,class:"d-block py-1"},He={class:"modal-footer"},Ke=Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-outline-gray btn-sm","data-bs-dismiss":"modal"}," 取消 ",-1);function Qe(e,t,a,l,o,n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",T,[Object(c["createElementVNode"])("div",_,[Object(c["createElementVNode"])("div",L,[F,Object(c["createElementVNode"])("div",z,[Object(c["createElementVNode"])("div",A,[Object(c["createElementVNode"])("div",U,[P,Object(c["createElementVNode"])("div",q,[Object(c["createElementVNode"])("div",G,[Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["small link-gray",{"text-secondary":o.isEditing.productInfo}]),onClick:t[0]||(t[0]=e=>o.isEditing.productInfo=!o.isEditing.productInfo)},[H,o.isEditing.productInfo?(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:0},[Object(c["createTextVNode"])("完成")],64)):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:1},[Object(c["createTextVNode"])("點我編輯")],64))],2)]),Object(c["createElementVNode"])("table",K,[Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(o.order.products,(t,a)=>(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:a},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(t.option,l=>(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:l.spec},[Q,Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.product.title)+" ",1),l.spec?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",R,Object(c["toDisplayString"])(l.spec),1)):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",W," $"+Object(c["toDisplayString"])(e.$toCurrency(t.product.price)),1),Object(c["createElementVNode"])("td",X,[Object(c["createElementVNode"])("div",Y,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext text-end":!o.isEditing.productInfo,"form-control me-1":o.isEditing.productInfo}]),min:"1",readonly:!o.isEditing.productInfo,"onUpdate:modelValue":e=>l.qty=e,onChange:e=>n.validate(t.qty,a)},null,42,Z),[[c["vModelText"],l.qty]]),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(t.product.unit),1)])])]))),128))],64))),128))])])])])])]),Object(c["createElementVNode"])("div",ee,[Object(c["createElementVNode"])("div",te,[Object(c["createElementVNode"])("h3",ae,[Object(c["createTextVNode"])(" 買家資料 "),Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["small link-gray",{"text-secondary":o.isEditing.customerInfo}]),onClick:t[1]||(t[1]=e=>o.isEditing.customerInfo=!o.isEditing.customerInfo)},le,2)]),Object(c["createElementVNode"])("table",oe,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[ne,Object(c["createElementVNode"])("td",re,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",id:"name",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext":!o.isEditing.customerInfo,"form-control":o.isEditing.customerInfo}]),"onUpdate:modelValue":t[2]||(t[2]=e=>o.order.user.name=e),readonly:!o.isEditing.customerInfo},null,10,de),[[c["vModelText"],o.order.user.name]])])]),Object(c["createElementVNode"])("tr",null,[ie,Object(c["createElementVNode"])("td",se,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"email",id:"email",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext":!o.isEditing.customerInfo,"form-control":o.isEditing.customerInfo}]),"onUpdate:modelValue":t[3]||(t[3]=e=>o.order.user.email=e),readonly:!o.isEditing.customerInfo},null,10,be),[[c["vModelText"],o.order.user.email]])])]),Object(c["createElementVNode"])("tr",null,[me,Object(c["createElementVNode"])("td",pe,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"tel",id:"tel",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext":!o.isEditing.customerInfo,"form-control":o.isEditing.customerInfo}]),"onUpdate:modelValue":t[4]||(t[4]=e=>o.order.user.tel=e),readonly:!o.isEditing.customerInfo},null,10,Oe),[[c["vModelText"],o.order.user.tel]])])]),Object(c["createElementVNode"])("tr",null,[je,Object(c["createElementVNode"])("td",ue,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",id:"address",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext":!o.isEditing.customerInfo,"form-control":o.isEditing.customerInfo}]),"onUpdate:modelValue":t[5]||(t[5]=e=>o.order.user.address=e),readonly:!o.isEditing.customerInfo},null,10,Ee),[[c["vModelText"],o.order.user.address]])])]),Object(c["createElementVNode"])("tr",null,[ge,Object(c["createElementVNode"])("td",Ve,Object(c["toDisplayString"])(o.order.message),1)])])])]),Object(c["createElementVNode"])("div",Ne,[Object(c["createElementVNode"])("h3",he,[Object(c["createTextVNode"])(" 詳細資料 "),Object(c["createElementVNode"])("button",{type:"button",class:Object(c["normalizeClass"])(["small link-gray",{"text-secondary":o.isEditing.detailInfo}]),onClick:t[6]||(t[6]=e=>o.isEditing.detailInfo=!o.isEditing.detailInfo)},fe,2)]),Object(c["createElementVNode"])("table",ke,[Object(c["createElementVNode"])("tbody",null,[Object(c["createElementVNode"])("tr",null,[xe,Object(c["createElementVNode"])("td",ve,[Object(c["createElementVNode"])("span",we,Object(c["toDisplayString"])(o.order.id),1)])]),Object(c["createElementVNode"])("tr",null,[Be,Object(c["createElementVNode"])("td",Ce,[Object(c["createElementVNode"])("span",De,Object(c["toDisplayString"])(e.$toLocalDate(o.order.create_at)),1)])]),Object(c["createElementVNode"])("tr",null,[Me,Object(c["createElementVNode"])("td",Ie,[Object(c["createElementVNode"])("span",$e,Object(c["toDisplayString"])(o.order.paid_date?e.$toLocalDate(o.order.paid_date):"-"),1)])]),Object(c["createElementVNode"])("tr",null,[Se,Object(c["createElementVNode"])("td",Te,[Object(c["withDirectives"])(Object(c["createElementVNode"])("select",{id:"payment",class:Object(c["normalizeClass"])(["py-1",{"form-control-plaintext":!o.isEditing.detailInfo,"form-select":o.isEditing.detailInfo}]),disabled:!o.isEditing.detailInfo,"onUpdate:modelValue":t[7]||(t[7]=e=>o.order.user.payment_method=e)},Ae,10,_e),[[c["vModelSelect"],o.order.user.payment_method]])])]),Object(c["createElementVNode"])("tr",null,[Ue,Object(c["createElementVNode"])("td",null,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["form-check py-1",{"ps-0":!o.isEditing.detailInfo}])},[o.isEditing.detailInfo?Object(c["withDirectives"])((Object(c["openBlock"])(),Object(c["createElementBlock"])("input",{key:0,class:"form-check-input",type:"checkbox",id:"isPaid",value:"","onUpdate:modelValue":t[8]||(t[8]=e=>o.order.is_paid=e)},null,512)),[[c["vModelCheckbox"],o.order.is_paid]]):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("label",{for:"isPaid",class:Object(c["normalizeClass"])(["form-check-label align-middle fw-bold",{"text-secondary":o.order.is_paid,"text-muted":!o.order.is_paid}])},Object(c["toDisplayString"])(o.order.is_paid?"已付款":"未付款"),3)],2)])]),Object(c["createElementVNode"])("tr",null,[Pe,o.order.products?(Object(c["openBlock"])(),Object(c["createElementBlock"])("td",qe,[n.total>1e3?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Ge," $"+Object(c["toDisplayString"])(e.$toCurrency(n.total)),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",Je," $"+Object(c["toDisplayString"])(e.$toCurrency(n.total+120))+"（含運） ",1))])):Object(c["createCommentVNode"])("",!0)])])])])])]),Object(c["createElementVNode"])("div",He,[Ke,Object(c["createElementVNode"])("button",{type:"button",class:"btn btn-primary btn-sm",onClick:t[9]||(t[9]=(...e)=>n.trigger&&n.trigger(...e))}," 確認修改 ")])])])],512)}var Re=a("519a"),We=a("7168"),Xe={data(){return{modal:"",order:{user:{}},isEditing:{productInfo:!1,customerInfo:!1,detailInfo:!1}}},mixins:[Re["a"]],props:{tempOrder:Object},emits:{"emit-change":e=>("boolean"!==typeof e&&console.warn("emit-change 事件的參數型別需為 boolean"),"boolean"===typeof e),"emit-get":()=>!0},methods:{async trigger(){this.$emit("emit-change",!0),this.order.paid_date=this.order.is_paid?Math.floor(Date.now()/1e3):"";try{const e="https://vue3-course-api.hexschool.io/api/peihan/admin/order/"+this.order.id,t=await Object(We["$put"])(e,{data:this.order}),{success:a}=t.data;a&&(this.$emit("emit-get"),this.hideModal()),this.$httpMsgState(t.data,"更新")}catch(e){this.$swal.fire({icon:"error",title:e})}},validate(e,t){if(!e||e<1){const e={success:!1,message:"修改數目不能小於 1"};this.$httpMsgState(e,"修改"),this.order.products[t].qty=1}}},watch:{tempOrder(){this.order={...this.tempOrder},this.isEditing={productInfo:!1,customerInfo:!1,detailInfo:!1}}},computed:{total(){const e=Object.entries(this.order.products);let t=0,a=100;return e.forEach(e=>{e[1].coupon&&(a=e[1].coupon.percent),e[1].option.forEach(a=>{t+=e[1].product.price*a.qty})}),t*=a/100,Math.floor(t)}}},Ye=a("d959"),Ze=a.n(Ye);const et=Ze()(Xe,[["render",Qe]]);var tt=et,at=a("ebbb"),ct=a("1799"),lt={name:"Orders Management",inheritAttrs:!1,data(){return{orders:[],tempOrder:{},pagination:{},isAll:!1,isLoading:!0}},components:{OrderModal:tt,DelModal:at["a"],Pagination:ct["a"]},methods:{async getOrders(e=1){try{const t="https://vue3-course-api.hexschool.io/api/peihan/admin/orders?page="+e,a=await Object(We["$get"])(t),{success:c,orders:l,pagination:o}=a.data;c&&(this.orders=l,this.pagination=o),this.triggerLoading(!1)}catch(t){this.$swal.fire({icon:"error",title:t})}},openModal(e,t,a){switch(e){case"detail":this.tempOrder=JSON.parse(JSON.stringify(t)),this.$refs.orderModal.openModal();break;case"delete":this.isAll=a,a||(this.tempOrder={...t}),this.$refs.delModal.openModal();break;default:break}},triggerLoading(e){this.isLoading=e}},async created(){await this.getOrders()}};const ot=Ze()(lt,[["render",S]]);t["default"]=ot}}]);
//# sourceMappingURL=chunk-0afebe55.3fdcc2ef.js.map